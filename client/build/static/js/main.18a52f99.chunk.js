(this.webpackJsonpworldpin=this.webpackJsonpworldpin||[]).push([[0],{30:function(e,t,n){e.exports=n.p+"static/media/worldpin_canvas_map.278f1c9b.png"},32:function(e,t,n){e.exports=n(44)},41:function(e,t,n){},42:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(18),o=n.n(r),c=n(14),i=n(28),u=n(20),s=(n(41),n(42),n(9)),d=n(10),m=n(12),p=n(11),f=n(13),h=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleColor=function(e){var t=e.target.value;n.setState({color:t})},n.handleName=function(e){n.setState({name:e.target.value})},n.handleDescription=function(e){n.setState({description:e.target.value})},n.handleSubmit=function(e,t){n.state.id?n.props.handleEdit(e,t):n.props.handleSubmit(e,t)},n.state={name:e.currentPin?e.currentPin.name:"",description:e.currentPin?e.currentPin.description:"",color:e.currentPin?e.currentPin.color:"#ffffff",x:e.currentPin?e.currentPin.x:0,y:e.currentPin?e.currentPin.y:0,id:e.currentPin?e.currentPin.id:null},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"pin-input"},l.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t,e.state)}},l.a.createElement("label",null," ",l.a.createElement("u",null,"Location:")," "),l.a.createElement("br",null),"Click on the map to save.",l.a.createElement("br",null),l.a.createElement("label",null," ",l.a.createElement("u",null,"Name:")," "),l.a.createElement("br",null),l.a.createElement("input",{type:"text",onChange:this.handleName,value:this.state.name,name:"name",id:"name"}),l.a.createElement("br",null),l.a.createElement("label",null," ",l.a.createElement("u",null,"Description:")," "),l.a.createElement("br",null),l.a.createElement("input",{type:"text",onChange:this.handleDescription,value:this.state.description,name:"description",id:"description"}),l.a.createElement("br",null),l.a.createElement("label",null," ",l.a.createElement("u",null,"Color:")," "),l.a.createElement("br",null),l.a.createElement("input",{type:"radio",name:"color",value:"#e8028c",id:"color-e8028c",onChange:this.handleColor}),l.a.createElement("label",{className:"color",htmlFor:"color-e8028c",style:{backgroundColor:"#e8028c"}}),l.a.createElement("input",{type:"radio",name:"color",value:"#61210f",id:"color-61210f",onChange:this.handleColor}),l.a.createElement("label",{className:"color",htmlFor:"color-61210f",style:{backgroundColor:"#61210f"}}),l.a.createElement("input",{type:"radio",name:"color",value:"#e9724c",id:"color-e9724c",onChange:this.handleColor}),l.a.createElement("label",{className:"color",htmlFor:"color-e9724c",style:{backgroundColor:"#e9724c"}}),l.a.createElement("input",{type:"radio",name:"color",value:"#edff1b",id:"color-edff1b",onChange:this.handleColor}),l.a.createElement("label",{className:"color",htmlFor:"color-edff1b",style:{backgroundColor:"#edff1b"}}),l.a.createElement("input",{type:"radio",name:"color",value:"#5dff4e",id:"color-5dff4e",onChange:this.handleColor}),l.a.createElement("label",{className:"color",htmlFor:"color-5dff4e",style:{backgroundColor:"#5dff4e"}}),l.a.createElement("input",{type:"radio",name:"color",value:"#5a67fc",id:"color-5a67fc",onChange:this.handleColor}),l.a.createElement("label",{className:"color",htmlFor:"color-5a67fc",style:{backgroundColor:"#5a67fc"}}),l.a.createElement("input",{type:"radio",name:"color",value:"#b63ff3",id:"color-b63ff3",onChange:this.handleColor}),l.a.createElement("label",{className:"color",htmlFor:"color-b63ff3",style:{backgroundColor:"#b63ff3"}}),l.a.createElement("input",{type:"radio",name:"color",value:"#000000",id:"color-000000",onChange:this.handleColor}),l.a.createElement("label",{className:"color",htmlFor:"color-000000",style:{backgroundColor:"#000000"}}),l.a.createElement("input",{type:"radio",name:"color",value:"#ffffff",id:"color-ffffff",onChange:this.handleColor}),l.a.createElement("label",{className:"color",htmlFor:"color-ffffff",style:{backgroundColor:"#ffffff"}}),l.a.createElement("br",null),l.a.createElement("input",{type:"submit"}),l.a.createElement("button",{type:"button",onClick:function(){return e.props.hide(null)},className:"hide"},"Hide")))}}]),t}(a.PureComponent),E=function(e){return l.a.createElement("div",{className:"pin-controls"},l.a.createElement("a",{href:"/",alt:"add"},l.a.createElement("i",{className:"material-icons",onClick:function(){return e.togglePinInput(null)}},"add_circle")),l.a.createElement("a",{href:"/",alt:"filter"},l.a.createElement("i",{className:"material-icons",onClick:function(t){return e.toggleColorFilter(t)}},"filter_list")))},b=function(e){return l.a.createElement("div",{className:"pin hover-div",style:{backgroundColor:e.info.color,top:"".concat(e.info.y,"%"),left:"".concat(e.info.x,"%")}},l.a.createElement("div",{className:"hover-div--on"},l.a.createElement("button",{alt:"edit"},l.a.createElement("i",{className:"material-icons small",onClick:function(){return e.togglePinInput(e.info)}},"edit")),l.a.createElement("button",{alt:"cancel"},l.a.createElement("i",{className:"material-icons small",onClick:function(){return e.delete(e.info.id)}},"cancel")),l.a.createElement("br",null),l.a.createElement("u",null,e.info.name),l.a.createElement("br",null),e.info.description,l.a.createElement("br",null)))},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return l.a.createElement(l.a.Fragment,null,e.pins.length>0?e.pins.map((function(t){return l.a.createElement(b,{key:t.id,canvasId:e.canvasId,info:t,delete:e.delete,togglePinInput:e.togglePinInput,browserSize:e.browserSize})})):null)},C=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,l=new Array(a),r=0;r<a;r++)l[r]=arguments[r];return(n=Object(m.a)(this,(e=Object(p.a)(t)).call.apply(e,[this].concat(l)))).handleColor=function(e){var t=e.target.value;n.props.filterByColor(t)},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return l.a.createElement("div",{className:"color-input"},l.a.createElement("form",null,l.a.createElement("label",null," ",l.a.createElement("u",null,"Color:")," "),l.a.createElement("br",null),l.a.createElement("input",{type:"radio",name:"color",value:"#e8028c",id:"color-e8028c",onChange:this.handleColor}),l.a.createElement("label",{className:"color",htmlFor:"color-e8028c",style:{backgroundColor:"#e8028c"}}),l.a.createElement("input",{type:"radio",name:"color",value:"#61210f",id:"color-61210f",onChange:this.handleColor}),l.a.createElement("label",{className:"color",htmlFor:"color-61210f",style:{backgroundColor:"#61210f"}}),l.a.createElement("input",{type:"radio",name:"color",value:"#e9724c",id:"color-e9724c",onChange:this.handleColor}),l.a.createElement("label",{className:"color",htmlFor:"color-e9724c",style:{backgroundColor:"#e9724c"}}),l.a.createElement("input",{type:"radio",name:"color",value:"#edff1b",id:"color-edff1b",onChange:this.handleColor}),l.a.createElement("label",{className:"color",htmlFor:"color-edff1b",style:{backgroundColor:"#edff1b"}}),l.a.createElement("input",{type:"radio",name:"color",value:"#5dff4e",id:"color-5dff4e",onChange:this.handleColor}),l.a.createElement("label",{className:"color",htmlFor:"color-5dff4e",style:{backgroundColor:"#5dff4e"}}),l.a.createElement("input",{type:"radio",name:"color",value:"#5a67fc",id:"color-5a67fc",onChange:this.handleColor}),l.a.createElement("label",{className:"color",htmlFor:"color-5a67fc",style:{backgroundColor:"#5a67fc"}}),l.a.createElement("input",{type:"radio",name:"color",value:"#b63ff3",id:"color-b63ff3",onChange:this.handleColor}),l.a.createElement("label",{className:"color",htmlFor:"color-b63ff3",style:{backgroundColor:"#b63ff3"}}),l.a.createElement("input",{type:"radio",name:"color",value:"#000000",id:"color-000000",onChange:this.handleColor}),l.a.createElement("label",{className:"color",htmlFor:"color-000000",style:{backgroundColor:"#000000"}}),l.a.createElement("input",{type:"radio",name:"color",value:"#ffffff",id:"color-ffffff",onChange:this.handleColor}),l.a.createElement("label",{className:"color",htmlFor:"color-ffffff",style:{backgroundColor:"#ffffff"}}),l.a.createElement("br",null)))}}]),t}(a.PureComponent),y=function(e){return l.a.createElement("header",{className:"canvas-title"},l.a.createElement("h1",null,"worldpin #",e.id," - ",e.title))},v=n(30),N=n.n(v),P=function(e){return l.a.createElement("img",{id:"world-map",onClick:e.handleMapClick,src:e.url||N.a,alt:"world map"})},I=function(){return l.a.createElement("div",{className:"canvas-info"},"Welcome! Click the settings button to begin tracking people or things.",l.a.createElement("br",null),l.a.createElement("br",null),"By: ",l.a.createElement("a",{alt:"my github",href:"https://github.com/mackenzie-km"},"Mackenzie Moore"),l.a.createElement("br",null),"Default Map: ",l.a.createElement("a",{alt:"default map source",href:"http://www.pngall.com/world-map-png"},"Pngall"))},O=n(6);function j(e,t){e.preventDefault(),t.id?window.location.replace("/maps/".concat(t.id)):fetch("/api/maps/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return window.location.replace("/maps/".concat(e.id))}))}var k=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).toggleInfo=function(e){e.preventDefault(),n.props.history.location.pathname===n.state.url?n.props.history.push("".concat(n.state.url,"/info")):n.props.history.replace("".concat(n.state.url))},n.handleMapClick=function(e){var t=e.clientX,a=e.clientY,l=document.getElementById("world-map").getBoundingClientRect(),r=document.getElementsByClassName("container")[0].offsetLeft,o=document.getElementsByClassName("container")[0].offsetTop,c={x:(t-r)/l.width*100,y:(a-o)/l.height*100};n.setState({capturedClick:c})},n.togglePinInput=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setState({currentPin:e}),n.props.history.location.pathname!==n.state.url?n.props.history.replace("".concat(n.state.url)):e?n.props.history.push("".concat(n.state.url,"/pins/").concat(e.id,"/edit")):n.props.history.push("".concat(n.state.url,"/pins/new")),n.toggleCursor()},n.toggleCursor=function(){var e=document.getElementById("root");"crosshair"!==e.style.cursor?e.style.cursor="crosshair":e.style.cursor="default"},n.toggleControls=function(e){e.preventDefault(),n.setState({pinControls:!n.state.pinControls})},n.filterByColor=function(e){var t={type:"SHOW_PINS_BY_COLOR",criteria:e};n.props.setFilter(t)},n.toggleColorFilter=function(e){e.preventDefault(),n.state.colorFilter&&n.props.setFilter({type:"SHOW_ALL",criteria:null}),n.setState({colorFilter:!n.state.colorFilter})},n.handleSubmit=function(e,t){e.preventDefault(),t.x=n.state.capturedClick.x,t.y=n.state.capturedClick.y,n.props.createPin(t,n.state.canvasId),n.togglePinInput(null)},n.handleEdit=function(e,t){e.preventDefault(),t.x=n.state.capturedClick.x,t.y=n.state.capturedClick.y,n.props.editPin(t),n.togglePinInput(null)},n.deletePin=function(e){n.props.deletePin(n.state.canvasId,e)},n.state={canvasId:e.router.params.id,url:e.router.url,pinControls:!1,colorFilter:!1,currentPin:{},capturedClick:{}},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchMapInfo(this.state.canvasId)}},{key:"render",value:function(){var e=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container"},l.a.createElement(y,{title:this.props.title,id:this.state.canvasId}),l.a.createElement(P,{url:this.props.url,handleMapClick:this.handleMapClick}),l.a.createElement(O.b,{path:"".concat(this.state.url,"/pins/new"),render:function(){return l.a.createElement(h,{currentPin:e.state.currentPin,handleSubmit:e.handleSubmit,handleEdit:e.handleEdit,hide:e.togglePinInput})}}),l.a.createElement(O.b,{path:"".concat(this.state.url,"/pins/:id/edit"),render:function(){return l.a.createElement(h,{currentPin:e.state.currentPin,handleSubmit:e.handleSubmit,handleEdit:e.handleEdit,hide:e.togglePinInput})}}),l.a.createElement(g,{canvasId:this.props.canvasId,browserSize:this.state.browserSize,togglePinInput:this.togglePinInput,pins:this.props.pins,delete:this.deletePin}),this.state.colorFilter?l.a.createElement(C,{filterByColor:this.filterByColor}):null),l.a.createElement("button",{id:"pin-controls-toggle",onClick:this.toggleControls,alt:"more"},l.a.createElement("i",{className:"material-icons"},"settings"),this.state.pinControls?l.a.createElement(E,{togglePinInput:this.togglePinInput,toggleColorFilter:this.toggleColorFilter}):null),l.a.createElement("button",{id:"canvas-info",onClick:this.toggleInfo,alt:"info"},l.a.createElement("i",{className:"material-icons"},"info")),l.a.createElement(O.b,{path:"".concat(this.state.url,"/info"),component:I}))}}]),t}(a.PureComponent),_=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SHOW_ALL":return e;case"SHOW_PIN_BY_ID":return e.filter((function(e){return e.id===t.criteria}));case"SHOW_PINS_BY_COLOR":return e.filter((function(e){return e.color===t.criteria}));default:return e}},S=Object(O.g)(Object(u.b)((function(e){return{pins:_(e.pinReducer.pins,e.filterReducer),title:e.pinReducer.title,url:e.pinReducer.url}}),(function(e){return{fetchMapInfo:function(t){return e(function(e){return function(t){t({type:"LOADING_MAP"}),fetch("/api/maps/".concat(e)).then((function(e){return e.json()})).then((function(e){return t({type:"LOAD_PINS",json:e})}))}}(t))},createPin:function(t,n){return e(function(e,t){return function(n){n({type:"CREATING_PIN"}),fetch("/api/maps/".concat(t,"/pins"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return n({type:"CREATE_PIN",data:e})}))}}(t,n))},deletePin:function(t,n){return e(function(e,t){return function(n){n({type:"DELETING_PIN"}),fetch("/api/maps/".concat(e,"/pins/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return n({type:"DELETE_PIN",data:e})}))}}(t,n))},editPin:function(t){return e(function(e){return function(t){t({type:"EDITING_PIN"}),fetch("/api/pins/".concat(e.id),{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return t({type:"EDIT_PIN",data:e})}))}}(t))},setFilter:function(t){return e(function(e){return function(t){t({type:e.type,criteria:e.criteria})}}(t))}}}))(k)),F=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(m.a)(this,Object(p.a)(t).call(this,e))).handleTitle=function(e){n.setState({title:e.target.value})},n.handleUrl=function(e){n.setState({url:e.target.value})},n.handleId=function(e){n.setState({id:e.target.value})},n.state={title:"",url:"",id:""},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return l.a.createElement("div",{className:"canvas-input"},l.a.createElement("h1",null,"Welcome to WorldPin!"),l.a.createElement("form",{onSubmit:function(t){return e.props.handleSubmit(t,e.state)}},l.a.createElement("h3",null,"Choose a title - preferrably 10 characters or less"),l.a.createElement("input",{type:"text",onChange:this.handleTitle,placeholder:"My WorldPin Title",value:this.state.title,name:"title",id:"title"}),l.a.createElement("h3",null,"Input a url. To use default map, leave blank."),l.a.createElement("input",{type:"text",placeholder:"N/A",onChange:this.handleUrl,value:this.state.url,name:"url",id:"url"}),l.a.createElement("h3",null,l.a.createElement("u",null,"OR")," open old map using an existing map ID"),l.a.createElement("input",{type:"text",placeholder:"Type ID here",onChange:this.handleId,value:this.state.id,name:"id",id:"id"}),l.a.createElement("input",{type:"submit"})))}}]),t}(l.a.Component),w=function(e){return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",{className:"container"},l.a.createElement(P,{url:null,handleMapClick:function(){return null}})),l.a.createElement(F,{handleSubmit:j}))},D=n(22),T=function(e){return l.a.createElement("div",{className:"App"},l.a.createElement(D.a,null,l.a.createElement(O.d,null,l.a.createElement(O.b,{path:"/maps/new",component:w}),l.a.createElement(O.b,{path:"/maps/:id",render:function(e){return l.a.createElement(S,{router:e.match})}}),l.a.createElement(O.b,{path:"/",component:w}),l.a.createElement(O.a,{from:"*",to:"/"}))))},L=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SHOW_ALL":return{type:"SHOW_ALL",criteria:null};case"SHOW_PIN_BY_ID":return{type:"SHOW_PIN_BY_ID",criteria:e.criteria};case"SHOW_PINS_BY_COLOR":return{type:"SHOW_PINS_BY_COLOR",criteria:e.criteria};default:return{type:"SHOW_ALL",criteria:null}}},A=n(15),x=n(16);var B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pins:[],loading:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_MAP":return{title:null,url:null,pins:Object(x.a)(e.pins),loading:!0};case"LOAD_PINS":return t.json?{pins:t.json.pins,title:t.json.title,url:t.json.url,loading:!1}:{title:null,url:null,pins:[],loading:!1};case"CREATING_PIN":return Object(A.a)({},e,{loading:!0});case"CREATE_PIN":return Object(A.a)({},e,{pins:[].concat(Object(x.a)(e.pins),[{id:t.data.id,name:t.data.name,x:t.data.x,y:t.data.y,description:t.data.description,color:t.data.color}]),loading:!1});case"DELETING_PIN":return Object(A.a)({},e,{pins:Object(x.a)(e.pins),loading:!0});case"DELETE_PIN":return Object(A.a)({},e,{pins:Object(x.a)(e.pins.filter((function(e){return e.id!==t.data.id}))),loading:!1});case"EDITING_PIN":return Object(A.a)({},e,{loading:!0});case"EDIT_PIN":return Object(A.a)({},e,{pins:[].concat(Object(x.a)(e.pins.filter((function(e){return e.id!==t.data.id}))),[{id:t.data.id,name:t.data.name,x:t.data.x,y:t.data.y,description:t.data.description,color:t.data.color}]),loading:!1});default:return e}},R=Object(c.c)({pinReducer:B,filterReducer:L}),W=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||c.d,M=Object(c.e)(R,W(Object(c.a)(i.a)));o.a.render(l.a.createElement(u.a,{store:M},l.a.createElement(T,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.18a52f99.chunk.js.map