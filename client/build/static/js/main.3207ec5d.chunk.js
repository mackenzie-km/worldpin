(this.webpackJsonpworldpin=this.webpackJsonpworldpin||[]).push([[0],{29:function(e,t,n){e.exports=n.p+"static/media/worldpin_canvas_map.278f1c9b.png"},32:function(e,t,n){e.exports=n(44)},41:function(e,t,n){},42:function(e,t,n){},44:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),l=n(17),o=n.n(l),c=n(14),i=n(27),u=n(19),s=(n(41),n(42),n(6)),d=n(7),p=n(9),m=n(8),f=n(10),h=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleColor=function(e){var t=e.target.value;n.setState({color:t})},n.handleName=function(e){n.setState({name:e.target.value})},n.handleDescription=function(e){n.setState({description:e.target.value})},n.handleSubmit=function(e,t){n.state.id?n.props.handleEdit(e,t):n.props.handleSubmit(e,t)},n.state={name:e.currentPin?e.currentPin.name:"",description:e.currentPin?e.currentPin.description:"",color:e.currentPin?e.currentPin.color:"#ffffff",x:e.currentPin?e.currentPin.x:0,y:e.currentPin?e.currentPin.y:0,id:e.currentPin?e.currentPin.id:null},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"pin-input"},r.a.createElement("form",{onSubmit:function(t){return e.handleSubmit(t,e.state)}},r.a.createElement("label",null," ",r.a.createElement("u",null,"Location:")," "),r.a.createElement("br",null),"Click on the map to save.",r.a.createElement("br",null),r.a.createElement("label",null," ",r.a.createElement("u",null,"Name:")," "),r.a.createElement("br",null),r.a.createElement("input",{type:"text",onChange:this.handleName,value:this.state.name,name:"name",id:"name"}),r.a.createElement("br",null),r.a.createElement("label",null," ",r.a.createElement("u",null,"Description:")," "),r.a.createElement("br",null),r.a.createElement("input",{type:"text",onChange:this.handleDescription,value:this.state.description,name:"description",id:"description"}),r.a.createElement("br",null),r.a.createElement("label",null," ",r.a.createElement("u",null,"Color:")," "),r.a.createElement("br",null),r.a.createElement("input",{type:"radio",name:"color",value:"#e8028c",id:"color-e8028c",onChange:this.handleColor}),r.a.createElement("label",{className:"color",htmlFor:"color-e8028c",style:{backgroundColor:"#e8028c"}}),r.a.createElement("input",{type:"radio",name:"color",value:"#61210f",id:"color-61210f",onChange:this.handleColor}),r.a.createElement("label",{className:"color",htmlFor:"color-61210f",style:{backgroundColor:"#61210f"}}),r.a.createElement("input",{type:"radio",name:"color",value:"#e9724c",id:"color-e9724c",onChange:this.handleColor}),r.a.createElement("label",{className:"color",htmlFor:"color-e9724c",style:{backgroundColor:"#e9724c"}}),r.a.createElement("input",{type:"radio",name:"color",value:"#edff1b",id:"color-edff1b",onChange:this.handleColor}),r.a.createElement("label",{className:"color",htmlFor:"color-edff1b",style:{backgroundColor:"#edff1b"}}),r.a.createElement("input",{type:"radio",name:"color",value:"#5dff4e",id:"color-5dff4e",onChange:this.handleColor}),r.a.createElement("label",{className:"color",htmlFor:"color-5dff4e",style:{backgroundColor:"#5dff4e"}}),r.a.createElement("input",{type:"radio",name:"color",value:"#5a67fc",id:"color-5a67fc",onChange:this.handleColor}),r.a.createElement("label",{className:"color",htmlFor:"color-5a67fc",style:{backgroundColor:"#5a67fc"}}),r.a.createElement("input",{type:"radio",name:"color",value:"#b63ff3",id:"color-b63ff3",onChange:this.handleColor}),r.a.createElement("label",{className:"color",htmlFor:"color-b63ff3",style:{backgroundColor:"#b63ff3"}}),r.a.createElement("input",{type:"radio",name:"color",value:"#000000",id:"color-000000",onChange:this.handleColor}),r.a.createElement("label",{className:"color",htmlFor:"color-000000",style:{backgroundColor:"#000000"}}),r.a.createElement("input",{type:"radio",name:"color",value:"#ffffff",id:"color-ffffff",onChange:this.handleColor}),r.a.createElement("label",{className:"color",htmlFor:"color-ffffff",style:{backgroundColor:"#ffffff"}}),r.a.createElement("br",null),r.a.createElement("input",{type:"submit"}),r.a.createElement("button",{type:"button",onClick:function(){return e.props.hide(null)},className:"hide"},"Hide")))}}]),t}(a.PureComponent),E=function(e){return r.a.createElement("div",{className:"pin-controls"},r.a.createElement("a",{href:"/",alt:"add"},r.a.createElement("i",{className:"material-icons",onClick:function(){return e.togglePinInput(null)}},"add_circle")),r.a.createElement("a",{href:"/",alt:"filter"},r.a.createElement("i",{className:"material-icons",onClick:function(t){return e.toggleColorFilter(t)}},"filter_list")))},b=function(e){return r.a.createElement("div",{className:"pin hover-div",style:{backgroundColor:e.info.color,top:"".concat(e.info.y,"%"),left:"".concat(e.info.x,"%")}},r.a.createElement("div",{className:"hover-div--on"},r.a.createElement("button",{alt:"edit"},r.a.createElement("i",{className:"material-icons small",onClick:function(){return e.togglePinInput(e.info)}},"edit")),r.a.createElement("button",{alt:"cancel"},r.a.createElement("i",{className:"material-icons small",onClick:function(){return e.delete(e.info.id)}},"cancel")),r.a.createElement("br",null),r.a.createElement("u",null,e.info.name),r.a.createElement("br",null),e.info.description,r.a.createElement("br",null)))},g=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return r.a.createElement(r.a.Fragment,null,e.pins.length>0?e.pins.map((function(t){return r.a.createElement(b,{key:t.id,canvasId:e.canvasId,info:t,delete:e.delete,togglePinInput:e.togglePinInput,browserSize:e.browserSize})})):null)},y=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleColor=function(e){var t=e.target.value;n.props.filterByColor(t)},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"color-input"},r.a.createElement("form",null,r.a.createElement("label",null," ",r.a.createElement("u",null,"Color:")," "),r.a.createElement("br",null),r.a.createElement("input",{type:"radio",name:"color",value:"#e8028c",id:"color-e8028c",onChange:this.handleColor}),r.a.createElement("label",{className:"color",htmlFor:"color-e8028c",style:{backgroundColor:"#e8028c"}}),r.a.createElement("input",{type:"radio",name:"color",value:"#61210f",id:"color-61210f",onChange:this.handleColor}),r.a.createElement("label",{className:"color",htmlFor:"color-61210f",style:{backgroundColor:"#61210f"}}),r.a.createElement("input",{type:"radio",name:"color",value:"#e9724c",id:"color-e9724c",onChange:this.handleColor}),r.a.createElement("label",{className:"color",htmlFor:"color-e9724c",style:{backgroundColor:"#e9724c"}}),r.a.createElement("input",{type:"radio",name:"color",value:"#edff1b",id:"color-edff1b",onChange:this.handleColor}),r.a.createElement("label",{className:"color",htmlFor:"color-edff1b",style:{backgroundColor:"#edff1b"}}),r.a.createElement("input",{type:"radio",name:"color",value:"#5dff4e",id:"color-5dff4e",onChange:this.handleColor}),r.a.createElement("label",{className:"color",htmlFor:"color-5dff4e",style:{backgroundColor:"#5dff4e"}}),r.a.createElement("input",{type:"radio",name:"color",value:"#5a67fc",id:"color-5a67fc",onChange:this.handleColor}),r.a.createElement("label",{className:"color",htmlFor:"color-5a67fc",style:{backgroundColor:"#5a67fc"}}),r.a.createElement("input",{type:"radio",name:"color",value:"#b63ff3",id:"color-b63ff3",onChange:this.handleColor}),r.a.createElement("label",{className:"color",htmlFor:"color-b63ff3",style:{backgroundColor:"#b63ff3"}}),r.a.createElement("input",{type:"radio",name:"color",value:"#000000",id:"color-000000",onChange:this.handleColor}),r.a.createElement("label",{className:"color",htmlFor:"color-000000",style:{backgroundColor:"#000000"}}),r.a.createElement("input",{type:"radio",name:"color",value:"#ffffff",id:"color-ffffff",onChange:this.handleColor}),r.a.createElement("label",{className:"color",htmlFor:"color-ffffff",style:{backgroundColor:"#ffffff"}}),r.a.createElement("br",null)))}}]),t}(a.PureComponent),C=function(e){return r.a.createElement("header",{className:"canvas-title"},r.a.createElement("h1",null,"worldpin #",e.id," - ",e.title))},v=n(29),O=n.n(v),P=function(e){return r.a.createElement("img",{id:"world-map",onClick:e.handleMapClick,src:e.url||O.a,alt:"world map"})},N=function(){return r.a.createElement("div",{className:"canvas-info"},"Welcome! Click the settings button to begin tracking people or things.",r.a.createElement("br",null),r.a.createElement("br",null),"By: ",r.a.createElement("a",{alt:"my github",href:"https://github.com/mackenzie-km"},"Mackenzie Moore"),r.a.createElement("br",null),"Default Map: ",r.a.createElement("a",{alt:"default map source",href:"http://www.pngall.com/world-map-png"},"Pngall"))},I=n(11);var j=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).toggleInfo=function(e){e.preventDefault(),n.props.history.location.pathname===n.state.url?n.props.history.push("".concat(n.state.url,"/info")):n.props.history.replace("".concat(n.state.url))},n.handleMapClick=function(e){var t=e.clientX,a=e.clientY,r=document.getElementById("world-map").getBoundingClientRect(),l=document.getElementsByClassName("container")[0].offsetLeft,o=document.getElementsByClassName("container")[0].offsetTop,c={x:(t-l)/r.width*100,y:(a-o)/r.height*100};n.setState({capturedClick:c})},n.togglePinInput=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;n.setState({currentPin:e}),n.props.history.location.pathname!==n.state.url?n.props.history.replace("".concat(n.state.url)):e?n.props.history.push("".concat(n.state.url,"/pins/").concat(e.id,"/edit")):n.props.history.push("".concat(n.state.url,"/pins/new"));var t=document.getElementById("root");n.state.pinInput?t.style.cursor="default":t.style.cursor="crosshair"},n.toggleControls=function(e){e.preventDefault(),n.setState({pinControls:!n.state.pinControls})},n.filterByColor=function(e){var t={type:"SHOW_PINS_BY_COLOR",criteria:e};n.props.setFilter(t)},n.toggleColorFilter=function(e){e.preventDefault(),n.state.colorFilter&&n.props.setFilter({type:"SHOW_ALL",criteria:null}),n.setState({colorFilter:!n.state.colorFilter})},n.handleSubmit=function(e,t){e.preventDefault(),t.x=n.state.capturedClick.x,t.y=n.state.capturedClick.y,n.props.createPin(t,n.state.canvasId),n.togglePinInput(null)},n.handleEdit=function(e,t){e.preventDefault(),t.x=n.state.capturedClick.x,t.y=n.state.capturedClick.y,n.props.editPin(t),n.togglePinInput(null)},n.deletePin=function(e){n.props.deletePin(n.state.canvasId,e)},n.state={canvasId:e.router.params.id,url:e.router.url,pinControls:!1,colorFilter:!1,currentPin:{},capturedClick:{},browserSize:{x:1366,y:768}},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){this.props.fetchMapInfo(this.state.canvasId)}},{key:"render",value:function(){var e=this;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement(C,{title:this.props.title,id:this.state.canvasId}),r.a.createElement(P,{url:this.props.url,handleMapClick:this.handleMapClick}),r.a.createElement(I.b,{path:"".concat(this.state.url,"/pins/new"),render:function(){return r.a.createElement(h,{currentPin:e.state.currentPin,handleSubmit:e.handleSubmit,handleEdit:e.handleEdit,hide:e.togglePinInput})}}),r.a.createElement(I.b,{path:"".concat(this.state.url,"/pins/:id/edit"),render:function(){return r.a.createElement(h,{currentPin:e.state.currentPin,handleSubmit:e.handleSubmit,handleEdit:e.handleEdit,hide:e.togglePinInput})}}),r.a.createElement(g,{canvasId:this.props.canvasId,browserSize:this.state.browserSize,togglePinInput:this.togglePinInput,pins:this.props.pins,delete:this.deletePin}),this.state.colorFilter?r.a.createElement(y,{filterByColor:this.filterByColor}):null),r.a.createElement("button",{id:"pin-controls-toggle",onClick:this.toggleControls,alt:"more"},r.a.createElement("i",{className:"material-icons"},"settings"),this.state.pinControls?r.a.createElement(E,{togglePinInput:this.togglePinInput,toggleColorFilter:this.toggleColorFilter}):null),r.a.createElement("button",{id:"canvas-info",onClick:this.toggleInfo,alt:"info"},r.a.createElement("i",{className:"material-icons"},"info")),r.a.createElement(I.b,{path:"".concat(this.state.url,"/info"),component:N}))}}]),t}(a.PureComponent),S=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SHOW_ALL":return e;case"SHOW_PIN_BY_ID":return e.filter((function(e){return e.id===t.criteria}));case"SHOW_PINS_BY_COLOR":return e.filter((function(e){return e.color===t.criteria}));default:return e}},_=Object(I.g)(Object(u.b)((function(e){return{pins:S(e.pinReducer.pins,e.filterReducer),title:e.pinReducer.title,url:e.pinReducer.url}}),(function(e){return{fetchMapInfo:function(t){return e(function(e){return function(t){t({type:"LOADING_MAP"}),fetch("/maps/".concat(e)).then((function(e){return e.json()})).then((function(e){return t({type:"LOAD_PINS",json:e})}))}}(t))},createPin:function(t,n){return e(function(e,t){return function(n){n({type:"CREATING_PIN"}),fetch("/maps/".concat(t,"/pins"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return n({type:"CREATE_PIN",data:e})}))}}(t,n))},deletePin:function(t,n){return e(function(e,t){return function(n){n({type:"DELETING_PIN"}),fetch("/maps/".concat(e,"/pins/").concat(t),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json"}}).then((function(e){return e.json()})).then((function(e){return n({type:"DELETE_PIN",data:e})}))}}(t,n))},editPin:function(t){return e(function(e){return function(t){t({type:"EDITING_PIN"}),fetch("/pins/".concat(e.id),{method:"PATCH",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).then((function(e){return t({type:"EDIT_PIN",data:e})}))}}(t))},setFilter:function(t){return e(function(e){return function(t){t({type:e.type,criteria:e.criteria})}}(t))}}}))(j)),k=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(p.a)(this,Object(m.a)(t).call(this,e))).handleTitle=function(e){n.setState({title:e.target.value})},n.handleUrl=function(e){n.setState({url:e.target.value})},n.handleId=function(e){n.setState({id:e.target.value})},n.state={title:"",url:"",id:""},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"canvas-input"},r.a.createElement("h1",null,"Welcome to WorldPin!"),r.a.createElement("form",{onSubmit:function(t){return e.props.handleSubmit(t,e.state)}},r.a.createElement("h3",null,"Choose a title - preferrably 10 characters or less"),r.a.createElement("input",{type:"text",onChange:this.handleTitle,placeholder:"My WorldPin Title",value:this.state.title,name:"title",id:"title"}),r.a.createElement("h3",null,"Input a url. To use default map, leave blank."),r.a.createElement("input",{type:"text",placeholder:"N/A",onChange:this.handleUrl,value:this.state.url,name:"url",id:"url"}),r.a.createElement("h3",null,r.a.createElement("u",null,"OR")," open old map using an existing map ID"),r.a.createElement("input",{type:"text",placeholder:"Type ID here",onChange:this.handleId,value:this.state.id,name:"id",id:"id"}),r.a.createElement("input",{type:"submit"})))}}]),t}(r.a.Component),w=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),l=0;l<a;l++)r[l]=arguments[l];return(n=Object(p.a)(this,(e=Object(m.a)(t)).call.apply(e,[this].concat(r)))).handleSubmit=function(e,t){e.preventDefault(),t.id?window.location.replace("/maps/".concat(t.id)):fetch("/maps/",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()})).then((function(e){return window.location.replace("/maps/".concat(e.id))}))},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container"},r.a.createElement(P,{url:null,handleMapClick:function(){return null}})),r.a.createElement(k,{handleSubmit:this.handleSubmit}))}}]),t}(r.a.Component),D=n(21),F=function(e){return r.a.createElement("div",{className:"App"},r.a.createElement(D.a,null,r.a.createElement(I.d,null,r.a.createElement(I.b,{path:"/maps/new",component:w}),r.a.createElement(I.b,{path:"/maps/:id",render:function(e){return r.a.createElement(_,{router:e.match})}}),r.a.createElement(I.b,{path:"/",component:w}),r.a.createElement(I.a,{from:"*",to:"/"}))))},T=function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0];var e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"SHOW_ALL":return{type:"SHOW_ALL",criteria:null};case"SHOW_PIN_BY_ID":return{type:"SHOW_PIN_BY_ID",criteria:e.criteria};case"SHOW_PINS_BY_COLOR":return{type:"SHOW_PINS_BY_COLOR",criteria:e.criteria};default:return{type:"SHOW_ALL",criteria:null}}},L=n(31),A=n(15);function x(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function B(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?x(n,!0).forEach((function(t){Object(L.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x(n).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{pins:[],loading:!1},t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOADING_MAP":return{title:null,url:null,pins:Object(A.a)(e.pins),loading:!0};case"LOAD_PINS":return t.json?{pins:t.json.pins,title:t.json.title,url:t.json.url,loading:!1}:{title:null,url:null,pins:[],loading:!1};case"CREATING_PIN":return B({},e,{loading:!0});case"CREATE_PIN":return B({},e,{pins:[].concat(Object(A.a)(e.pins),[{id:t.data.id,name:t.data.name,x:t.data.x,y:t.data.y,description:t.data.description,color:t.data.color}]),loading:!1});case"DELETING_PIN":return B({},e,{pins:Object(A.a)(e.pins),loading:!0});case"DELETE_PIN":return B({},e,{pins:Object(A.a)(e.pins.filter((function(e){return e.id!==t.data.id}))),loading:!1});case"EDITING_PIN":return B({},e,{loading:!0});case"EDIT_PIN":return B({},e,{pins:[].concat(Object(A.a)(e.pins.filter((function(e){return e.id!==t.data.id}))),[{id:t.data.id,name:t.data.name,x:t.data.x,y:t.data.y,description:t.data.description,color:t.data.color}]),loading:!1});default:return e}},W=Object(c.c)({pinReducer:R,filterReducer:T}),H=Object(c.e)(W,Object(c.d)(Object(c.a)(i.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__()));o.a.render(r.a.createElement(u.a,{store:H},r.a.createElement(F,null)),document.getElementById("root"))}},[[32,1,2]]]);
//# sourceMappingURL=main.3207ec5d.chunk.js.map